<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Genesis 5: The Genealogy from Adam to Noah - Manna</title>
  <meta name="description" content="Bible Lessonss on Genesis 5 KJV: genesis 5 explained verse by verse.">
  <link rel="stylesheet" href="../styles.css">
  <link rel="stylesheet" href="../css/lesson-content.css">
  <link rel="icon" href="../public/images/icon.png">
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-DF5ZGFNKTB"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-DF5ZGFNKTB');
  </script>
</head>

<body>
  <!-- Header -->
  <header>
    <div class="container">
      <div class="header-content">
        <div class="logo">
          <a href="/">
            <img src="../public/images/icon.png" alt="Manna Icon">
            <span>Manna</span>
          </a>
        </div>
        <nav>
          <ul>
            <li><a href="/bible-lessons">Lessons</a></li>
            <li><a href="/prayers">Prayers</a></li>
            <li><a href="/resources">Resources</a></li>
            <li><a href="/download">Download</a></li>
          </ul>
        </nav>
        <div class="social-header">
          <a href="https://discord.gg/NbQVtWeNMa"><img src="../public/images/discard.png" alt="Discord"></a>
          <a href="https://www.instagram.com/the_manna_app"><img src="../public/images/ins.png" alt="Instagram"></a>
          <a href="https://www.tiktok.com/@manna.app"><img src="../public/images/tt.png" alt="TikTok"></a>
        </div>
      </div>
    </div>
  </header>

  <!-- Lesson Content -->
  <section class="lesson-content-section">
    <div class="container lesson-container">
      <!-- Left Side: Lesson Content -->
      <div class="lesson-content">
        <div class="lesson-progress">
          <div class="progress-bar">
            <div class="progress-fill" style="width: 0%"></div>
          </div>
          <div class="progress-text">0% Complete</div>
        </div>

        <!-- Section 1 -->
        <div class="lesson-section" id="section1">
          <div class="lesson-card">
            <div class="lesson-card-header">
              <h2>The Lineage of Adam to Noah</h2>
              <div class="lesson-reference" data-verses="1-5">Genesis 5:1-5</div>
            </div>
            <div class="lesson-card-body">
              <div class="key-verse">
                <blockquote>
                  "This is the written account of Adam's family line. When God created mankind, he made them in the likeness of God."
                  <cite>Genesis 5:1</cite>
                </blockquote>
              </div>
              <div class="key-points">
                <h3>Key Points:</h3>
                <ul>
                  <li>The chapter begins by reaffirming humanity's creation in God's likeness</li>
                  <li>Adam's life, death, and descendants are recorded</li>
                  <li>Sets the pattern for genealogies: age at fatherhood, remaining years, and total lifespan</li>
                </ul>
              </div>
            </div>
          </div>
          <div class="lesson-detail">
            <p>This section traces Adam's family line, starting with Seth. It reminds us that every person is made in God's image, just like Adam. The list shows long lifespans, which might seem surprising today, but it emphasizes how God blessed these early generations. Adam's death is recorded to show the consequence of sin, but the genealogy also points forward to hope through his descendants. This sets the stage for God's ongoing plan.</p>
          </div>
          <div class="lesson-navigation-buttons">
            <button class="next-section-btn" data-next="section2">Continue</button>
          </div>
        </div>

        <!-- Section 2 -->
        <div class="lesson-section hidden" id="section2">
          <div class="lesson-card">
            <div class="lesson-card-header">
              <h2>Generations of Seth to Enoch</h2>
              <div class="lesson-reference" data-verses="6-20">Genesis 5:6-20</div>
            </div>
            <div class="lesson-card-body">
              <div class="key-verse">
                <blockquote>
                  "Enoch walked faithfully with God; then he was no more, because God took him away."
                  <cite>Genesis 5:24</cite>
                </blockquote>
              </div>
              <div class="key-points">
                <h3>Key Points:</h3>
                <ul>
                  <li>Highlights long lifespans (e.g., Seth lived 912 years)</li>
                  <li>Introduces Enoch, who 'walked with God' uniquely</li>
                  <li>Emphasizes continuity of faith through generations</li>
                </ul>
              </div>
            </div>
          </div>
          <div class="lesson-detail">
            <p>The descendants of Seth lived faithful lives, unlike Cain's line. Enoch stands out because he had such a close friendship with God that he didn't die a normal death. His life teaches that walking with God changes everything. The others, like Mahalalel and Jared, lived ordinary but long lives, showing God's patience with humanity before the flood. Their stories connect Adam to Noah, the next key figure.</p>
          </div>
          <div class="lesson-navigation-buttons">
            <button class="prev-section-btn" data-prev="section1">Previous</button>
            <button class="next-section-btn" data-next="section3">Continue</button>
          </div>
        </div>

        <!-- Section 3 -->
        <div class="lesson-section hidden" id="section3">
          <div class="lesson-card">
            <div class="lesson-card-header">
              <h2>Enoch's Righteous Life and Mysterious Departure</h2>
              <div class="lesson-reference" data-verses="21-24">Genesis 5:21-24</div>
            </div>
            <div class="lesson-card-body">
              <div class="key-verse">
                <blockquote>
                  "Enoch walked faithfully with God; then he was no more, because God took him away."
                  <cite>Genesis 5:24</cite>
                </blockquote>
              </div>
              <div class="key-points">
                <h3>Key Points:</h3>
                <ul>
                  <li>Enoch's close relationship with God is highlighted</li>
                  <li>He did not experience death but was 'taken' by God</li>
                  <li>Stands out as a model of faithfulness in a fallen world</li>
                </ul>
              </div>
            </div>
          </div>
          <div class="lesson-detail">
            <p>Enoch's life is a bright spot in this genealogy. While others lived centuries and died, Enoch's relationship with God was so special that he was taken directly to heaven. This shows that a life of faithfulness pleases God deeply. His example would later inspire others to seek God wholeheartedly, even when surrounded by wrongdoing. His story is a reminder that God rewards those who earnestly follow Him.</p>
          </div>
          <div class="lesson-navigation-buttons">
            <button class="prev-section-btn" data-prev="section2">Previous</button>
            <button class="next-section-btn" data-next="section4">Continue</button>
          </div>
        </div>

        <!-- Section 4 -->
        <div class="lesson-section hidden" id="section4">
          <div class="lesson-card">
            <div class="lesson-card-header">
              <h2>From Methuselah to Noah</h2>
              <div class="lesson-reference" data-verses="25-32">Genesis 5:25-32</div>
            </div>
            <div class="lesson-card-body">
              <div class="key-verse">
                <blockquote>
                  "He named him Noah and said, 'He will comfort us in the labor and painful toil of our hands caused by the ground the LORD has cursed.'"
                  <cite>Genesis 5:29</cite>
                </blockquote>
              </div>
              <div class="key-points">
                <h3>Key Points:</h3>
                <ul>
                  <li>Methuselah, the longest-lived man (969 years), is noted</li>
                  <li>Noah's birth brings hope amid growing corruption</li>
                  <li>Lamech prophesies Noah's role in bringing relief from hardship</li>
                </ul>
              </div>
            </div>
          </div>
          <div class="lesson-detail">
            <p>Methuselah's extreme age (969 years) becomes a symbol of God's patience before the flood. His grandson Noah is introduced as a turning point—his name means 'rest,' hinting at his future role in saving humanity. Lamech's prophecy about Noah shows God's plan to bring relief through him. This sets up the next chapter of the Bible, where Noah's faithfulness changes history. The genealogy ends with hope, despite the darkness of the times.</p>
          </div>
          <div class="lesson-navigation-buttons">
            <button class="prev-section-btn" data-prev="section3">Previous</button>
            <button class="next-section-btn" data-next="quiz">Test My Mastery</button>
          </div>
        </div>

        <!-- Quiz Section -->
        <div class="lesson-section hidden" id="quiz">
          <div class="lesson-card quiz-card">
            <div class="lesson-card-header">
              <h2>Level Up Test</h2>
              <div class="lesson-reference" data-verses="1-32">Genesis 5</div>
            </div>
            <div class="lesson-card-body">
              <div class="quiz-container">
                <div class="quiz-progress">
                  <span id="quiz-progress-text">Question 1 of 3</span>
                  <div class="quiz-progress-bar">
                    <div class="quiz-progress-fill" style="width: 33%"></div>
                  </div>
                </div>
                
                <form id="quiz-form">
                  <!-- Question 1 -->
                  <div class="quiz-question" id="question1">
                    <h3>1. What made Enoch unique in Genesis 5?</h3>
                    <div class="quiz-options">
                      <div class="quiz-option">
                        <input type="radio" id="q1a" name="q1" value="A">
                        <label for="q1a">A. He built a great city</label>
                      </div>
                      <div class="quiz-option">
                        <input type="radio" id="q1b" name="q1" value="B">
                        <label for="q1b">B. He was taken by God without dying</label>
                      </div>
                      <div class="quiz-option">
                        <input type="radio" id="q1c" name="q1" value="C">
                        <label for="q1c">C. He lived the longest lifespan</label>
                      </div>
                      <div class="quiz-option">
                        <input type="radio" id="q1d" name="q1" value="D">
                        <label for="q1d">D. He was the firstborn son</label>
                      </div>
                    </div>
                    <div class="quiz-hint hidden">
                      <p><strong>Hint:</strong> Genesis 5:24</p>
                    </div>
                    <div class="quiz-feedback hidden"></div>
                    <div class="quiz-controls">
                      <div class="quiz-buttons-center">
                        <button type="button" class="submit-question-btn" data-question="1" data-verses="24">Submit Answer</button>
                      </div>
                    </div>
                  </div>

                  <!-- Question 2 -->
                  <div class="quiz-question hidden" id="question2">
                    <h3>2. What does Noah's name signify?</h3>
                    <div class="quiz-options">
                      <div class="quiz-option">
                        <input type="radio" id="q2a" name="q2" value="A">
                        <label for="q2a">A. Strength in battle</label>
                      </div>
                      <div class="quiz-option">
                        <input type="radio" id="q2b" name="q2" value="B">
                        <label for="q2b">B. Rest or comfort</label>
                      </div>
                      <div class="quiz-option">
                        <input type="radio" id="q2c" name="q2" value="C">
                        <label for="q2c">C. Wisdom from God</label>
                      </div>
                      <div class="quiz-option">
                        <input type="radio" id="q2d" name="q2" value="D">
                        <label for="q2d">D. Leadership of nations</label>
                      </div>
                    </div>
                    <div class="quiz-hint hidden">
                      <p><strong>Hint:</strong> Genesis 5:29</p>
                    </div>
                    <div class="quiz-feedback hidden"></div>
                    <div class="quiz-controls">
                      <div class="quiz-buttons-center">
                        <button type="button" class="prev-question-btn" data-prev="1">Previous</button>
                        <button type="button" class="submit-question-btn" data-question="2" data-verses="29">Submit Answer</button>
                      </div>
                    </div>
                  </div>

                  <!-- Question 3 -->
                  <div class="quiz-question hidden" id="question3">
                    <h3>3. How does Genesis 5 begin?</h3>
                    <div class="quiz-options">
                      <div class="quiz-option">
                        <input type="radio" id="q3a" name="q3" value="A">
                        <label for="q3a">A. With a story of creation</label>
                      </div>
                      <div class="quiz-option">
                        <input type="radio" id="q3b" name="q3" value="B">
                        <label for="q3b">B. By listing Adam's descendants</label>
                      </div>
                      <div class="quiz-option">
                        <input type="radio" id="q3c" name="q3" value="C">
                        <label for="q3c">C. With a prophecy about the flood</label>
                      </div>
                      <div class="quiz-option">
                        <input type="radio" id="q3d" name="q3" value="D">
                        <label for="q3d">D. By describing a great famine</label>
                      </div>
                    </div>
                    <div class="quiz-hint hidden">
                      <p><strong>Hint:</strong> Genesis 5:1-3</p>
                    </div>
                    <div class="quiz-feedback hidden"></div>
                    <div class="quiz-controls">
                      <div class="quiz-buttons-center">
                        <button type="button" class="prev-question-btn" data-prev="2">Previous</button>
                        <button type="button" class="submit-question-btn" data-question="3" data-verses="1-3">Submit Answer</button>
                      </div>
                    </div>
                  </div>
                </form>

                <div id="quiz-results" class="hidden">
                  <h3>Your Results</h3>
                  <p id="quiz-score"></p>
                  <div id="quiz-feedback"></div>
                  <div class="quiz-result-buttons">
                    <button id="retry-quiz-btn">Try Again</button>
                    <button id="complete-lesson-btn">Complete Lesson</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="lesson-navigation-buttons">
            <button class="prev-section-btn" data-prev="section4">Previous</button>
          </div>
        </div>

        <!-- Completion Message (Hidden initially) -->
        <div class="lesson-completion hidden" id="completion">
          <div class="completion-card">
            <div class="completion-header">
              <div class="completion-icon">✓</div>
              <h2>Lesson Complete!</h2>
            </div>
            <div class="completion-content">
              <p class="completion-message">Congratulations on completing Genesis 5. You've learned about the genealogy from Adam to Noah and the remarkable story of Enoch who walked with God.</p>
              
              <div class="app-promotion">
                <p class="app-promotion-text">Download the Manna App to unlock more free content.</p>
                <ul class="app-features-list">
                  <li>More audio courses, Prayer, and Devotional content for Free</li>
                  <li>Progress tracking, streak rewards, and grow closer to God</li>
                  <li>Get answers to any Bible-related questions</li>
                </ul>
                <div class="download-options">
                  <div class="qr-code">
                    <img src="../public/images/qrcode.png" alt="QR Code to download Manna App">
                  </div>
                  <div class="app-store-links">
                    <a href="https://apps.apple.com/us/app/manna-bible-study-prayer/id1669523799" class="app-store-link">
                      <img src="../public/images/download.png" alt="Download on App Store">
                    </a>
                  </div>
                </div>
              </div>
              
              <div class="completion-buttons">
                <a href="/bible-lessons/genesis6" class="lesson-btn primary-btn">Next Lesson: Genesis 6</a>
                <a href="/bible-lessons" class="lesson-btn secondary-btn">Back to Lessons</a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Right Side: Bible Text -->
      <div class="bible-text">
        <div class="bible-header">
          <h2>Genesis 5</h2>
          <div class="bible-controls">
            <button id="increase-font">A+</button>
            <button id="decrease-font">A-</button>
          </div>
        </div>
        <div class="bible-content">
          <p><sup>1</sup> This is the written account of Adam's family line. When God created mankind, he made them in the likeness of God.</p>
          <p><sup>2</sup> He created them male and female and blessed them. And he named them "Mankind" when they were created.</p>
          <p><sup>3</sup> When Adam had lived 130 years, he had a son in his own likeness, in his own image; and he named him Seth.</p>
          <p><sup>4</sup> After Seth was born, Adam lived 800 years and had other sons and daughters.</p>
          <p><sup>5</sup> Altogether, Adam lived a total of 930 years, and then he died.</p>
          <p><sup>6</sup> When Seth had lived 105 years, he became the father of Enosh.</p>
          <p><sup>7</sup> After he became the father of Enosh, Seth lived 807 years and had other sons and daughters.</p>
          <p><sup>8</sup> Altogether, Seth lived a total of 912 years, and then he died.</p>
          <p><sup>9</sup> When Enosh had lived 90 years, he became the father of Kenan.</p>
          <p><sup>10</sup> After he became the father of Kenan, Enosh lived 815 years and had other sons and daughters.</p>
          <p><sup>11</sup> Altogether, Enosh lived a total of 905 years, and then he died.</p>
          <p><sup>12</sup> When Kenan had lived 70 years, he became the father of Mahalalel.</p>
          <p><sup>13</sup> After he became the father of Mahalalel, Kenan lived 840 years and had other sons and daughters.</p>
          <p><sup>14</sup> Altogether, Kenan lived a total of 910 years, and then he died.</p>
          <p><sup>15</sup> When Mahalalel had lived 65 years, he became the father of Jared.</p>
          <p><sup>16</sup> After he became the father of Jared, Mahalalel lived 830 years and had other sons and daughters.</p>
          <p><sup>17</sup> Altogether, Mahalalel lived a total of 895 years, and then he died.</p>
          <p><sup>18</sup> When Jared had lived 162 years, he became the father of Enoch.</p>
          <p><sup>19</sup> After he became the father of Enoch, Jared lived 800 years and had other sons and daughters.</p>
          <p><sup>20</sup> Altogether, Jared lived a total of 962 years, and then he died.</p>
          <p><sup>21</sup> When Enoch had lived 65 years, he became the father of Methuselah.</p>
          <p><sup>22</sup> After he became the father of Methuselah, Enoch walked faithfully with God 300 years and had other sons and daughters.</p>
          <p><sup>23</sup> Altogether, Enoch lived a total of 365 years.</p>
          <p><sup>24</sup> Enoch walked faithfully with God; then he was no more, because God took him away.</p>
          <p><sup>25</sup> When Methuselah had lived 187 years, he became the father of Lamech.</p>
          <p><sup>26</sup> After he became the father of Lamech, Methuselah lived 782 years and had other sons and daughters.</p>
          <p><sup>27</sup> Altogether, Methuselah lived a total of 969 years, and then he died.</p>
          <p><sup>28</sup> When Lamech had lived 182 years, he had a son.</p>
          <p><sup>29</sup> He named him Noah and said, "He will comfort us in the labor and painful toil of our hands caused by the ground the LORD has cursed."</p>
          <p><sup>30</sup> After Noah was born, Lamech lived 595 years and had other sons and daughters.</p>
          <p><sup>31</sup> Altogether, Lamech lived a total of 777 years, and then he died.</p>
          <p><sup>32</sup> After Noah was 500 years old, he became the father of Shem, Ham and Japheth.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="footer-content">
        <div class="footer-column">
          <h4>Links</h4>
          <div class="social-links">
            <a href="https://discord.gg/NbQVtWeNMa"><img src="../public/images/discard.png" alt="Discord"></a>
            <a href="https://www.instagram.com/the_manna_app"><img src="../public/images/ins.png" alt="Instagram"></a>
            <a href="https://www.tiktok.com/@manna.app"><img src="../public/images/tt.png" alt="TikTok"></a>
          </div>
        </div>
        <div class="footer-column">
          <h4>Contact Us</h4>
          <p><a href="mailto:support@themanna.app">support@themanna.app</a></p>
        </div>
        <div class="footer-column">
          <h4>Legal</h4>
          <div class="legal">
            <a href="https://s.femometer.com/html_template/3027.html">Privacy Policy</a>
            <a href="https://s.femometer.com/html_template/3028.html">Terms of Service</a>
          </div>
        </div>
      </div>
      <div class="copyright">
        <p>&copy; 2025 Baymed Limited. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Navigation between sections
      const sections = document.querySelectorAll('.lesson-section');
      const progressBar = document.querySelector('.progress-fill');
      const progressText = document.querySelector('.progress-text');
      const bibleVerses = document.querySelectorAll('.bible-content p');
      let currentSectionIndex = 0;
      const totalSections = sections.length - 1; // Excluding quiz section
      
      // 高亮并滚动到指定的经文
      function highlightVerses(verseRange) {
        // 移除之前的高亮
        bibleVerses.forEach(verse => {
          verse.classList.remove('highlighted');
        });
        
        if (verseRange) {
          const [start, end] = verseRange.split('-').map(v => parseInt(v));
          const endVerse = end || start;
          
          // 添加高亮到引用的经文
          for (let i = start - 1; i < endVerse; i++) {
            if (bibleVerses[i]) {
              bibleVerses[i].classList.add('highlighted');
              
              // 滚动到第一个高亮的经文
              if (i === start - 1) {
                bibleVerses[i].scrollIntoView({
                  behavior: 'smooth',
                  block: 'center'
                });
              }
            }
          }
        }
      }
      
      // Update progress
      function updateProgress() {
        if (currentSectionIndex < totalSections) {
          const progress = Math.round((currentSectionIndex / totalSections) * 100);
          progressBar.style.width = `${progress}%`;
          progressText.textContent = `${progress}% Complete`;
        }
      }
      
      // Show section
      function showSection(sectionId) {
        sections.forEach(section => {
          section.classList.add('hidden');
        });
        
        const currentSection = document.getElementById(sectionId);
        currentSection.classList.remove('hidden');
        
        // 更新当前部分索引
        for (let i = 0; i < sections.length; i++) {
          if (sections[i].id === sectionId) {
            currentSectionIndex = i;
            break;
          }
        }
        
        // 自动高亮相关经文
        const reference = currentSection.querySelector('.lesson-reference');
        if (reference) {
          const verseRange = reference.getAttribute('data-verses');
          highlightVerses(verseRange);
        }
        
        updateProgress();

        // 如果是测试模块，立即隐藏所有 Previous 按钮
        if (sectionId === 'quiz') {
          // 隐藏底部导航中的 Previous 按钮
          document.querySelector('#quiz .lesson-navigation-buttons .prev-section-btn').style.display = 'none';
          // 隐藏问题中的 Previous 按钮
          document.querySelectorAll('.prev-question-btn').forEach(button => {
            button.style.display = 'none';
          });
        }
        
        // 滚动到部分顶部
        window.scrollTo({
          top: document.querySelector('.lesson-content').offsetTop - 100,
          behavior: 'smooth'
        });
      }
      
      // Next section buttons
      document.querySelectorAll('.next-section-btn').forEach(button => {
        button.addEventListener('click', function() {
          const nextSectionId = this.getAttribute('data-next');
          showSection(nextSectionId);
        });
      });
      
      // Previous section buttons
      document.querySelectorAll('.prev-section-btn').forEach(button => {
        button.addEventListener('click', function() {
          const prevSectionId = this.getAttribute('data-prev');
          showSection(prevSectionId);
        });
      });
      
  
      const initialReference = document.querySelector('#section1 .lesson-reference');
      if (initialReference) {
        const verseRange = initialReference.getAttribute('data-verses');
        highlightVerses(verseRange);
      }
      
      // Quiz functionality
      const quizForm = document.getElementById('quiz-form');
      const quizQuestions = document.querySelectorAll('.quiz-question');
      const quizResults = document.getElementById('quiz-results');
      const quizScore = document.getElementById('quiz-score');
      const quizFeedback = document.getElementById('quiz-feedback');
      const retryQuizBtn = document.getElementById('retry-quiz-btn');
      const completeLessonBtn = document.getElementById('complete-lesson-btn');
      const quizProgressText = document.getElementById('quiz-progress-text');
      const quizProgressFill = document.querySelector('.quiz-progress-fill');
      const bibleTextSection = document.querySelector('.bible-text');
      let currentQuestionIndex = 0;
      let userAnswers = {};
      let questionSubmitted = {};

      // 初始化时隐藏圣经文本
      function toggleBibleText(show) {
        if (show) {
          bibleTextSection.style.display = 'block';
        } else {
          bibleTextSection.style.display = 'none';
        }
      }

      // 显示指定问题
      function showQuestion(index) {
        quizQuestions.forEach((question, i) => {
          if (i === index) {
            question.classList.remove('hidden');
          } else {
            question.classList.add('hidden');
          }
        });
        
        // 更新进度条
        currentQuestionIndex = index;
        quizProgressText.textContent = `Question ${index + 1} of ${quizQuestions.length}`;
        quizProgressFill.style.width = `${((index + 1) / quizQuestions.length) * 100}%`;
        
        // 如果问题已提交，显示圣经文本，否则隐藏
        toggleBibleText(questionSubmitted[index + 1]);
      }

      // 提交问题答案
      function submitQuestion(questionNumber, verseRange) {
        const questionIndex = questionNumber - 1;
        const selectedOption = document.querySelector(`input[name="q${questionNumber}"]:checked`);
        const feedbackElement = document.querySelector(`#question${questionNumber} .quiz-feedback`);
        const hintElement = document.querySelector(`#question${questionNumber} .quiz-hint`);
        const submitButton = document.querySelector(`#question${questionNumber} .submit-question-btn`);
        const nextButton = document.createElement('button');
        nextButton.type = 'button';
        nextButton.className = 'next-question-btn';
        
        const answers = {
          q1: 'B',
          q2: 'B',
          q3: 'B'
        };
        
        if (!selectedOption) {
          feedbackElement.innerHTML = '<p class="incorrect">Please select an answer.</p>';
          feedbackElement.classList.remove('hidden');
          return;
        }
        
        // 记录用户答案
        userAnswers[`q${questionNumber}`] = selectedOption.value;
        questionSubmitted[questionNumber] = true;
        
        // 显示提示和反馈
        hintElement.classList.remove('hidden');
        
        // 禁用选项和提交按钮
        document.querySelectorAll(`#question${questionNumber} input[type="radio"]`).forEach(input => {
          input.disabled = true;
        });
        submitButton.disabled = true;
        submitButton.style.display = 'none'; // 隐藏提交按钮
        
        // 显示反馈
        if (selectedOption.value === answers[`q${questionNumber}`]) {
          feedbackElement.innerHTML = '<p class="correct">Correct!</p>';
        } else {
          feedbackElement.innerHTML = `<p class="incorrect">Incorrect. The correct answer is ${answers[`q${questionNumber}`]}.</p>`;
        }
        feedbackElement.classList.remove('hidden');
        
        // 显示圣经文本并高亮相关经文
        toggleBibleText(true);
        highlightVerses(verseRange);
        
        // 如果不是最后一个问题，添加下一题按钮
        if (questionNumber < quizQuestions.length) {
          nextButton.textContent = 'Next Question';
          nextButton.setAttribute('data-next', questionNumber + 1);
          nextButton.addEventListener('click', function() {
            showQuestion(parseInt(this.getAttribute('data-next')) - 1);
          });
          submitButton.parentNode.appendChild(nextButton);
        } else {
          // 如果是最后一个问题，添加查看结果按钮
          nextButton.textContent = 'View Results';
          nextButton.addEventListener('click', showResults);
          submitButton.parentNode.appendChild(nextButton);
        }
      }

      // 显示测验结果
      function showResults() {
        const answers = {
          q1: 'B',
          q2: 'B',
          q3: 'B'
        };
        
        let score = 0;
        let feedback = '';
        
        // 检查答案
        for (const question in answers) {
          if (userAnswers[question] === answers[question]) {
            score++;
            feedback += `<p class="correct">Question ${question.substring(1)}: Correct!</p>`;
          } else {
            feedback += `<p class="incorrect">Question ${question.substring(1)}: Incorrect. The correct answer is ${answers[question]}.</p>`;
          }
        }
        
        // 显示结果
        quizScore.textContent = `You scored ${score} out of 3`;
        quizFeedback.innerHTML = feedback;
        
        // 隐藏问题，显示结果
        quizQuestions.forEach(question => {
          question.classList.add('hidden');
        });
        quizResults.classList.remove('hidden');
      }

      // 重置测验
      retryQuizBtn.addEventListener('click', function() {
        quizForm.reset();
        quizResults.classList.add('hidden');
        userAnswers = {};
        questionSubmitted = {};
        
        // 重置所有问题状态
        document.querySelectorAll('.quiz-hint').forEach(element => {
          element.classList.add('hidden');
        });
        
        document.querySelectorAll('.quiz-feedback').forEach(element => {
          element.classList.add('hidden');
          element.innerHTML = ''; // 清空反馈内容
        });
        
        document.querySelectorAll('.quiz-question input[type="radio"]').forEach(input => {
          input.disabled = false;
        });
        
        document.querySelectorAll('.submit-question-btn').forEach(button => {
          button.disabled = false;
          button.style.display = '';
        });
        
        document.querySelectorAll('.next-question-btn').forEach(button => {
          button.remove();
        });
        
        // 显示第一个问题
        showQuestion(0);
        toggleBibleText(false);
      });

      // 完成课程
      completeLessonBtn.addEventListener('click', function() {
        document.getElementById('quiz').classList.add('hidden');
        document.getElementById('completion').classList.remove('hidden');
        progressBar.style.width = '100%';
        progressText.textContent = '100% Complete';
        // 隐藏圣经文本
        toggleBibleText(false);
      });

      // 上一题按钮
      document.querySelectorAll('.prev-question-btn').forEach(button => {
        button.addEventListener('click', function() {
          const prevQuestionIndex = parseInt(this.getAttribute('data-prev')) - 1;
          showQuestion(prevQuestionIndex);
        });
      });

      // 提交答案按钮
      document.querySelectorAll('.submit-question-btn').forEach(button => {
        button.addEventListener('click', function() {
          const questionNumber = parseInt(this.getAttribute('data-question'));
          const verseRange = this.getAttribute('data-verses');
          submitQuestion(questionNumber, verseRange);
        });
      });

      // 初始化测验
      function initQuiz() {
        // 确保只显示第一个问题，其他都隐藏
        quizQuestions.forEach((question, i) => {
          if (i === 0) {
            question.classList.remove('hidden');
          } else {
            question.classList.add('hidden');
          }
        });
        
        // 隐藏所有提示
        document.querySelectorAll('.quiz-hint').forEach(hint => {
          hint.classList.add('hidden');
        });
        
        // 隐藏结果部分
        document.getElementById('quiz-results').classList.add('hidden');
        
        // 隐藏底部导航中的 Previous 按钮
        document.querySelector('#quiz .lesson-navigation-buttons .prev-section-btn').style.display = 'none';
        
        // 隐藏所有问题中的 Previous 按钮
        document.querySelectorAll('.prev-question-btn').forEach(button => {
          button.style.display = 'none';
        });
        
        toggleBibleText(false);
      }

      // 当进入测验部分时初始化
      document.querySelector('[data-next="quiz"]').addEventListener('click', function() {
        setTimeout(initQuiz, 100); // 给DOM更新一点时间
      });
      
      // Bible text font size controls
      const bibleContent = document.querySelector('.bible-content');
      let fontSize = 16; // Default font size
      
      document.getElementById('increase-font').addEventListener('click', function() {
        if (fontSize < 24) {
          fontSize += 2;
          bibleContent.style.fontSize = `${fontSize}px`;
        }
      });
      
      document.getElementById('decrease-font').addEventListener('click', function() {
        if (fontSize > 12) {
          fontSize -= 2;
          bibleContent.style.fontSize = `${fontSize}px`;
        }
      });
    });
  </script>
</body>
</html>
