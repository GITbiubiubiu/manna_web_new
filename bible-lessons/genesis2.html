<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Genesis 2: Garden of Eden - Manna</title>
<meta name="description" content="Bible Lessons on Genesis 2 KJV: genesis 2 explained verse by verse.">
<link rel="stylesheet" href="../styles.css">
<link rel="stylesheet" href="../css/lesson-content.css">
<link rel="icon" href="../public/images/icon.png">
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DF5ZGFNKTB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-DF5ZGFNKTB');
</script>
</head>

<body>
<!-- Header -->
<header>
  <div class="container">
    <div class="header-content">
      <div class="logo">
        <a href="/">
          <img src="../public/images/icon.png" alt="Manna Icon">
          <span>Manna</span>
        </a>
      </div>
      <nav>
        <ul>
          <li><a href="/bible-lessons">Lessons</a></li>
          <li><a href="/prayers">Prayers</a></li>
          <li><a href="/resources">Resources</a></li>
          <li><a href="/#download">Download</a></li>
        </ul>
      </nav>
      <div class="social-header">
        <a href="https://discord.gg/NbQVtWeNMa"><img src="../public/images/discard.png" alt="Discord"></a>
        <a href="https://www.instagram.com/the_manna_app"><img src="../public/images/ins.png" alt="Instagram"></a>
        <a href="https://www.tiktok.com/@manna.app"><img src="../public/images/tt.png" alt="TikTok"></a>
      </div>
    </div>
  </div>
</header>

<!-- Lesson Content -->
<section class="lesson-content-section">
  <div class="container lesson-container">
    <!-- Left Side: Lesson Content -->
    <div class="lesson-content">
      <div class="lesson-progress">
        <div class="progress-bar">
          <div class="progress-fill" style="width: 0%"></div>
        </div>
        <div class="progress-text">0% Complete</div>
      </div>

      <!-- Section 1 -->
      <div class="lesson-section" id="section1">
        <div class="lesson-card">
          <div class="lesson-card-header">
            <h2>The Completion of Creation</h2>
            <div class="lesson-reference" data-verses="1-3">Genesis 2:1-3</div>
          </div>
          <div class="lesson-card-body">
            <div class="key-verse">
              <blockquote>
                "Thus the heavens and the earth were finished, and all the host of them."
                <cite>Genesis 2:1</cite>
              </blockquote>
            </div>
            <div class="key-points">
              <h3>Key Points:</h3>
              <ul>
                <li>God finishes His work of creation in six days</li>
                <li>He rests on the seventh day, blessing and sanctifying it</li>
                <li>The seventh day becomes a holy day of rest</li>
              </ul>
            </div>
          </div>
        </div>
        <div class="lesson-detail">
          <p>The first section describes how God completed His creation in six days and rested on the seventh. This day of rest was blessed and set apart as holy, showing the importance of taking time to reflect and honor God. The idea of a day of rest later becomes a key part of many religious traditions. This teaches us that rest is valuable and part of God's design for life.</p>
        </div>
        <div class="lesson-navigation-buttons">
          <button class="next-section-btn" data-next="section2">Continue</button>
        </div>
      </div>

      <!-- Section 2 -->
      <div class="lesson-section hidden" id="section2">
        <div class="lesson-card">
          <div class="lesson-card-header">
            <h2>The Creation of Man</h2>
            <div class="lesson-reference" data-verses="4-7">Genesis 2:4-7</div>
          </div>
          <div class="lesson-card-body">
            <div class="key-verse">
              <blockquote>
                "And the LORD God formed man of the dust of the ground, and breathed into his nostrils the breath of life; and man became a living soul."
                <cite>Genesis 2:7</cite>
              </blockquote>
            </div>
            <div class="key-points">
              <h3>Key Points:</h3>
              <ul>
                <li>God forms man from the dust of the ground</li>
                <li>He breathes life into man, making him a living being</li>
                <li>Man is uniquely created with God's breath</li>
              </ul>
            </div>
          </div>
        </div>
        <div class="lesson-detail">
          <p>Next, we learn how God created the first man, Adam, from the dust of the ground. Unlike the rest of creation, God personally breathed life into Adam, making him a living being. This shows how special humans are to God, as we carry His breath within us. This intimate act highlights the close relationship between God and humanity.</p>
        </div>
        <div class="lesson-navigation-buttons">
          <button class="prev-section-btn" data-prev="section1">Previous</button>
          <button class="next-section-btn" data-next="section3">Continue</button>
        </div>
      </div>

      <!-- Section 3 -->
      <div class="lesson-section hidden" id="section3">
        <div class="lesson-card">
          <div class="lesson-card-header">
            <h2>The Garden of Eden</h2>
            <div class="lesson-reference" data-verses="8-14">Genesis 2:8-14</div>
          </div>
          <div class="lesson-card-body">
            <div class="key-verse">
              <blockquote>
                "And the LORD God planted a garden eastward in Eden; and there he put the man whom he had formed."
                <cite>Genesis 2:8</cite>
              </blockquote>
            </div>
            <div class="key-points">
              <h3>Key Points:</h3>
              <ul>
                <li>God plants a garden in Eden as a home for man</li>
                <li>The garden is filled with beautiful and nourishing trees</li>
                <li>A river flows through Eden, dividing into four heads</li>
              </ul>
            </div>
          </div>
        </div>
        <div class="lesson-detail">
          <p>God then prepares a perfect home for man—the Garden of Eden. This garden is full of beauty, with trees that are pleasing to the eye and good for food. A river flows through it, providing water and life. Eden represents God's care and provision, showing that He wants us to live in a place of abundance and peace.</p>
        </div>
        <div class="lesson-navigation-buttons">
          <button class="prev-section-btn" data-prev="section2">Previous</button>
          <button class="next-section-btn" data-next="section4">Continue</button>
        </div>
      </div>

      <!-- Section 4 -->
      <div class="lesson-section hidden" id="section4">
        <div class="lesson-card">
          <div class="lesson-card-header">
            <h2>Man's Responsibility in the Garden</h2>
            <div class="lesson-reference" data-verses="15-17">Genesis 2:15-17</div>
          </div>
          <div class="lesson-card-body">
            <div class="key-verse">
              <blockquote>
                "And the LORD God took the man, and put him into the garden of Eden to dress it and to keep it."
                <cite>Genesis 2:15</cite>
              </blockquote>
            </div>
            <div class="key-points">
              <h3>Key Points:</h3>
              <ul>
                <li>Man is placed in the garden to tend and keep it</li>
                <li>God gives man permission to eat from any tree except one</li>
                <li>Disobedience brings consequences, showing God's authority</li>
              </ul>
            </div>
          </div>
        </div>
        <div class="lesson-detail">
          <p>In this section, God gives Adam a job—to take care of the garden. He also sets one rule: not to eat from the tree of the knowledge of good and evil. This shows that while God gives us freedom, He also sets boundaries for our good. The warning about consequences teaches us that our choices matter and affect our relationship with God.</p>
        </div>
        <div class="lesson-navigation-buttons">
          <button class="prev-section-btn" data-prev="section3">Previous</button>
          <button class="next-section-btn" data-next="section5">Continue</button>
        </div>
      </div>

      <!-- Section 5 -->
      <div class="lesson-section hidden" id="section5">
        <div class="lesson-card">
          <div class="lesson-card-header">
            <h2>The Creation of Woman</h2>
            <div class="lesson-reference" data-verses="18-25">Genesis 2:18-25</div>
          </div>
          <div class="lesson-card-body">
            <div class="key-verse">
              <blockquote>
                "And the rib, which the LORD God had taken from man, made he a woman, and brought her unto the man."
                <cite>Genesis 2:22</cite>
              </blockquote>
            </div>
            <div class="key-points">
              <h3>Key Points:</h3>
              <ul>
                <li>God sees that man needs a companion and helper</li>
                <li>Woman is created from man's rib, showing their unity</li>
                <li>Man and woman are designed to live in loving partnership</li>
              </ul>
            </div>
          </div>
        </div>
        <div class="lesson-detail">
          <p>Finally, God creates Eve from Adam's rib to be his companion. This shows that men and women are meant to support and complete each other. Their unity is a picture of love and partnership, reflecting God's design for relationships. This teaches us the value of companionship and mutual care in life.</p>
        </div>
        <div class="lesson-navigation-buttons">
          <button class="prev-section-btn" data-prev="section4">Previous</button>
          <button class="next-section-btn" data-next="quiz">Test My Mastery</button>
        </div>
      </div>

      <!-- Quiz Section -->
      <div class="lesson-section hidden" id="quiz">
        <div class="lesson-card quiz-card">
          <div class="lesson-card-header">
            <h2>Level Up Test</h2>
            <div class="lesson-reference" data-verses="1-25">Genesis 2</div>
          </div>
          <div class="lesson-card-body">
            <div class="quiz-container">
              <div class="quiz-progress">
                <span id="quiz-progress-text">Question 1 of 3</span>
                <div class="quiz-progress-bar">
                  <div class="quiz-progress-fill" style="width: 33%"></div>
                </div>
              </div>
              
              <form id="quiz-form">
                <!-- Question 1 -->
                <div class="quiz-question" id="question1">
                  <h3>1. What did God do on the seventh day after creation?</h3>
                  <div class="quiz-options">
                    <div class="quiz-option">
                      <input type="radio" id="q1a" name="q1" value="A">
                      <label for="q1a">A. Created more animals</label>
                    </div>
                    <div class="quiz-option">
                      <input type="radio" id="q1b" name="q1" value="B">
                      <label for="q1b">B. Rested and blessed the day</label>
                    </div>
                    <div class="quiz-option">
                      <input type="radio" id="q1c" name="q1" value="C">
                      <label for="q1c">C. Planted another garden</label>
                    </div>
                    <div class="quiz-option">
                      <input type="radio" id="q1d" name="q1" value="D">
                      <label for="q1d">D. Made the sun brighter</label>
                    </div>
                  </div>
                  <div class="quiz-hint hidden">
                    <p><strong>Hint:</strong> Genesis 2:2-3</p>
                  </div>
                  <div class="quiz-feedback hidden"></div>
                  <div class="quiz-controls">
                    <div class="quiz-buttons-center">
                      <button type="button" class="submit-question-btn" data-question="1" data-verses="2-3">Submit Answer</button>
                    </div>
                  </div>
                </div>

                <!-- Question 2 -->
                <div class="quiz-question hidden" id="question2">
                  <h3>2. How did God create the first man?</h3>
                  <div class="quiz-options">
                    <div class="quiz-option">
                      <input type="radio" id="q2a" name="q2" value="A">
                      <label for="q2a">A. From a piece of fruit</label>
                    </div>
                    <div class="quiz-option">
                      <input type="radio" id="q2b" name="q2" value="B">
                      <label for="q2b">B. From the dust of the ground</label>
                    </div>
                    <div class="quiz-option">
                      <input type="radio" id="q2c" name="q2" value="C">
                      <label for="q2c">C. From a cloud</label>
                    </div>
                    <div class="quiz-option">
                      <input type="radio" id="q2d" name="q2" value="D">
                      <label for="q2d">D. From a mountain</label>
                    </div>
                  </div>
                  <div class="quiz-hint hidden">
                    <p><strong>Hint:</strong> Genesis 2:7</p>
                  </div>
                  <div class="quiz-feedback hidden"></div>
                  <div class="quiz-controls">
                    <div class="quiz-buttons-center">
                      <button type="button" class="prev-question-btn" data-prev="1">Previous</button>
                      <button type="button" class="submit-question-btn" data-question="2" data-verses="7">Submit Answer</button>
                    </div>
                  </div>
                </div>

                <!-- Question 3 -->
                <div class="quiz-question hidden" id="question3">
                  <h3>3. Why did God create woman?</h3>
                  <div class="quiz-options">
                    <div class="quiz-option">
                      <input type="radio" id="q3a" name="q3" value="A">
                      <label for="q3a">A. To rule over man</label>
                    </div>
                    <div class="quiz-option">
                      <input type="radio" id="q3b" name="q3" value="B">
                      <label for="q3b">B. To be a companion for man</label>
                    </div>
                    <div class="quiz-option">
                      <input type="radio" id="q3c" name="q3" value="C">
                      <label for="q3c">To tend the garden alone</label>
                    </div>
                    <div class="quiz-option">
                      <input type="radio" id="q3d" name="q3" value="D">
                      <label for="q3d">D. To test man's obedience</label>
                    </div>
                  </div>
                  <div class="quiz-hint hidden">
                    <p><strong>Hint:</strong> Genesis 2:18</p>
                  </div>
                  <div class="quiz-feedback hidden"></div>
                  <div class="quiz-controls">
                    <div class="quiz-buttons-center">
                      <button type="button" class="prev-question-btn" data-prev="2">Previous</button>
                      <button type="button" class="submit-question-btn" data-question="3" data-verses="18">Submit Answer</button>
                    </div>
                  </div>
                </div>
              </form>

              <div id="quiz-results" class="hidden">
                <h3>Your Results</h3>
                <p id="quiz-score"></p>
                <div id="quiz-feedback"></div>
                <div class="quiz-result-buttons">
                  <button id="retry-quiz-btn">Try Again</button>
                  <button id="complete-lesson-btn">Complete Lesson</button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="lesson-navigation-buttons">
          <button class="prev-section-btn" data-prev="section5">Previous</button>
        </div>
      </div>

      <!-- Completion Message (Hidden initially) -->
      <div class="lesson-completion hidden" id="completion">
        <div class="completion-card">
          <div class="completion-header">
            <div class="completion-icon">✓</div>
            <h2>Lesson Complete!</h2>
          </div>
          <div class="completion-content">
            <p class="completion-message">Congratulations on completing Genesis 2. You've learned about the Garden of Eden and God's creation of humanity.</p>
            
            <div class="app-promotion">
              <p class="app-promotion-text">Download the Manna App to unlock more free content.</p>
              <ul class="app-features-list">
                <li>More audio courses, Prayer, and Devotional content for Free</li>
                <li>Progress tracking, streak rewards, and grow closer to God</li>
                <li>Get answers to any Bible-related questions</li>
              </ul>
              <div class="download-options">
                <div class="qr-code">
                  <img src="../public/images/qrcode.png" alt="QR Code to download Manna App">
                </div>
                <div class="app-store-links">
                  <a href="https://apps.apple.com/us/app/manna-bible-study-prayer/id1669523799" class="app-store-link">
                    <img src="../public/images/download.png" alt="Download on App Store">
                  </a>
                </div>
              </div>
            </div>
            
            <div class="completion-buttons">
              <a href="/bible-lessons/genesis3" class="lesson-btn primary-btn">Next Lesson: Genesis 3</a>
              <a href="/bible-lessons" class="lesson-btn secondary-btn">Back to Lessons</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Right Side: Bible Text -->
    <div class="bible-text">
      <div class="bible-header">
        <h2>Genesis 2</h2>
        <div class="bible-controls">
          <button id="increase-font">A+</button>
          <button id="decrease-font">A-</button>
        </div>
      </div>
      <div class="bible-content">
        <p><sup>1</sup> Thus the heavens and the earth were finished, and all the host of them.</p>
        <p><sup>2</sup> And on the seventh day God ended his work which he had made; and he rested on the seventh day from all his work which he had made.</p>
        <p><sup>3</sup> And God blessed the seventh day, and sanctified it: because that in it he had rested from all his work which God created and made.</p>
        <p><sup>4</sup> These are the generations of the heavens and of the earth when they were created, in the day that the LORD God made the earth and the heavens,</p>
        <p><sup>5</sup> And every plant of the field before it was in the earth, and every herb of the field before it grew: for the LORD God had not caused it to rain upon the earth, and there was not a man to till the ground.</p>
        <p><sup>6</sup> But there went up a mist from the earth, and watered the whole face of the ground.</p>
        <p><sup>7</sup> And the LORD God formed man of the dust of the ground, and breathed into his nostrils the breath of life; and man became a living soul.</p>
        <p><sup>8</sup> And the LORD God planted a garden eastward in Eden; and there he put the man whom he had formed.</p>
        <p><sup>9</sup> And out of the ground made the LORD God to grow every tree that is pleasant to the sight, and good for food; the tree of life also in the midst of the garden, and the tree of knowledge of good and evil.</p>
        <p><sup>10</sup> And a river went out of Eden to water the garden; and from thence it was parted, and became into four heads.</p>
        <p><sup>11</sup> The name of the first is Pison: that is it which compasseth the whole land of Havilah, where there is gold;</p>
        <p><sup>12</sup> And the gold of that land is good: there is bdellium and the onyx stone.</p>
        <p><sup>13</sup> And the name of the second river is Gihon: the same is it that compasseth the whole land of Ethiopia.</p>
        <p><sup>14</sup> And the name of the third river is Hiddekel: that is it which goeth toward the east of Assyria. And the fourth river is Euphrates.</p>
        <p><sup>15</sup> And the LORD God took the man, and put him into the garden of Eden to dress it and to keep it.</p>
        <p><sup>16</sup> And the LORD God commanded the man, saying, Of every tree of the garden thou mayest freely eat:</p>
        <p><sup>17</sup> But of the tree of the knowledge of good and evil, thou shalt not eat of it: for in the day that thou eatest thereof thou shalt surely die.</p>
        <p><sup>18</sup> And the LORD God said, It is not good that the man should be alone; I will make him an help meet for him.</p>
        <p><sup>19</sup> And out of the ground the LORD God formed every beast of the field, and every fowl of the air; and brought them unto Adam to see what he would call them: and whatsoever Adam called every living creature, that was the name thereof.</p>
        <p><sup>20</sup> And Adam gave names to all cattle, and to the fowl of the air, and to every beast of the field; but for Adam there was not found an help meet for him.</p>
        <p><sup>21</sup> And the LORD God caused a deep sleep to fall upon Adam, and he slept: and he took one of his ribs, and closed up the flesh instead thereof;</p>
        <p><sup>22</sup> And the rib, which the LORD God had taken from man, made he a woman, and brought her unto the man.</p>
        <p><sup>23</sup> And Adam said, This is now bone of my bones, and flesh of my flesh: she shall be called Woman, because she was taken out of Man.</p>
        <p><sup>24</sup> Therefore shall a man leave his father and his mother, and shall cleave unto his wife: and they shall be one flesh.</p>
        <p><sup>25</sup> And they were both naked, the man and his wife, and were not ashamed.</p>
      </div>
    </div>
  </div>
</section>

<!-- Footer -->
<footer>
  <div class="container">
    <div class="footer-content">
      <div class="footer-column">
        <h4>Links</h4>
        <div class="social-links">
          <a href="https://discord.gg/NbQVtWeNMa"><img src="../public/images/discard.png" alt="Discord"></a>
          <a href="https://www.instagram.com/the_manna_app"><img src="../public/images/ins.png" alt="Instagram"></a>
          <a href="https://www.tiktok.com/@manna.app"><img src="../public/images/tt.png" alt="TikTok"></a>
        </div>
      </div>
      <div class="footer-column">
        <h4>Contact Us</h4>
        <p><a href="mailto:support@themanna.app">support@themanna.app</a></p>
      </div>
      <div class="footer-column">
        <h4>Legal</h4>
        <div class="legal">
          <a href="https://s.femometer.com/html_template/3027.html">Privacy Policy</a>
          <a href="https://s.femometer.com/html_template/3028.html">Terms of Service</a>
        </div>
      </div>
    </div>
    <div class="copyright">
      <p>&copy; 2025 Baymed Limited. All rights reserved.</p>
    </div>
  </div>
</footer>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Navigation between sections
    const sections = document.querySelectorAll('.lesson-section');
    const progressBar = document.querySelector('.progress-fill');
    const progressText = document.querySelector('.progress-text');
    const bibleVerses = document.querySelectorAll('.bible-content p');
    let currentSectionIndex = 0;
    const totalSections = sections.length - 1; // Excluding quiz section
    
    // 高亮并滚动到指定的经文
    function highlightVerses(verseRange) {
      // 移除之前的高亮
      bibleVerses.forEach(verse => {
        verse.classList.remove('highlighted');
      });
      
      if (verseRange) {
        const [start, end] = verseRange.split('-').map(v => parseInt(v));
        const endVerse = end || start;
        
        // 添加高亮到引用的经文
        for (let i = start - 1; i < endVerse; i++) {
          if (bibleVerses[i]) {
            bibleVerses[i].classList.add('highlighted');
            
            // 滚动到第一个高亮的经文
            if (i === start - 1) {
              bibleVerses[i].scrollIntoView({
                behavior: 'smooth',
                block: 'center'
              });
            }
          }
        }
      }
    }
    
    // Update progress
    function updateProgress() {
      if (currentSectionIndex < totalSections) {
        const progress = Math.round((currentSectionIndex / totalSections) * 100);
        progressBar.style.width = `${progress}%`;
        progressText.textContent = `${progress}% Complete`;
      }
    }
    
    // Show section
    function showSection(sectionId) {
      sections.forEach(section => {
        section.classList.add('hidden');
      });
      
      const currentSection = document.getElementById(sectionId);
      currentSection.classList.remove('hidden');
      
      // 更新当前部分索引
      for (let i = 0; i < sections.length; i++) {
        if (sections[i].id === sectionId) {
          currentSectionIndex = i;
          break;
        }
      }
      
      // 自动高亮相关经文
      const reference = currentSection.querySelector('.lesson-reference');
      if (reference) {
        const verseRange = reference.getAttribute('data-verses');
        highlightVerses(verseRange);
      }
      
      updateProgress();

      // 如果是测试模块，立即隐藏所有 Previous 按钮
      if (sectionId === 'quiz') {
        // 隐藏底部导航中的 Previous 按钮
        document.querySelector('#quiz .lesson-navigation-buttons .prev-section-btn').style.display = 'none';
        // 隐藏问题中的 Previous 按钮
        document.querySelectorAll('.prev-question-btn').forEach(button => {
          button.style.display = 'none';
        });
      }
      
      // 滚动到部分顶部
      window.scrollTo({
        top: document.querySelector('.lesson-content').offsetTop - 100,
        behavior: 'smooth'
      });
    }
    
    // Next section buttons
    document.querySelectorAll('.next-section-btn').forEach(button => {
      button.addEventListener('click', function() {
        const nextSectionId = this.getAttribute('data-next');
        showSection(nextSectionId);
      });
    });
    
    // Previous section buttons
    document.querySelectorAll('.prev-section-btn').forEach(button => {
      button.addEventListener('click', function() {
        const prevSectionId = this.getAttribute('data-prev');
        showSection(prevSectionId);
      });
    });
    
    const initialReference = document.querySelector('#section1 .lesson-reference');
    if (initialReference) {
      const verseRange = initialReference.getAttribute('data-verses');
      highlightVerses(verseRange);
    }
    
    // Quiz functionality
    const quizForm = document.getElementById('quiz-form');
    const quizQuestions = document.querySelectorAll('.quiz-question');
    const quizResults = document.getElementById('quiz-results');
    const quizScore = document.getElementById('quiz-score');
    const quizFeedback = document.getElementById('quiz-feedback');
    const retryQuizBtn = document.getElementById('retry-quiz-btn');
    const completeLessonBtn = document.getElementById('complete-lesson-btn');
    const quizProgressText = document.getElementById('quiz-progress-text');
    const quizProgressFill = document.querySelector('.quiz-progress-fill');
    const bibleTextSection = document.querySelector('.bible-text');
    let currentQuestionIndex = 0;
    let userAnswers = {};
    let questionSubmitted = {};

    // 初始化时隐藏圣经文本
    function toggleBibleText(show) {
      if (show) {
        bibleTextSection.style.display = 'block';
      } else {
        bibleTextSection.style.display = 'none';
      }
    }

    // 显示指定问题
    function showQuestion(index) {
      quizQuestions.forEach((question, i) => {
        if (i === index) {
          question.classList.remove('hidden');
        } else {
          question.classList.add('hidden');
        }
      });
      
      // 更新进度条
      currentQuestionIndex = index;
      quizProgressText.textContent = `Question ${index + 1} of ${quizQuestions.length}`;
      quizProgressFill.style.width = `${((index + 1) / quizQuestions.length) * 100}%`;
      
      // 如果问题已提交，显示圣经文本，否则隐藏
      toggleBibleText(questionSubmitted[index + 1]);
    }

    // 提交问题答案
    function submitQuestion(questionNumber, verseRange) {
      const questionIndex = questionNumber - 1;
      const selectedOption = document.querySelector(`input[name="q${questionNumber}"]:checked`);
      const feedbackElement = document.querySelector(`#question${questionNumber} .quiz-feedback`);
      const hintElement = document.querySelector(`#question${questionNumber} .quiz-hint`);
      const submitButton = document.querySelector(`#question${questionNumber} .submit-question-btn`);
      const nextButton = document.createElement('button');
      nextButton.type = 'button';
      nextButton.className = 'next-question-btn';
      
      const answers = {
        q1: 'B',
        q2: 'B',
        q3: 'B'
      };
      
      if (!selectedOption) {
        feedbackElement.innerHTML = '<p class="incorrect">Please select an answer.</p>';
        feedbackElement.classList.remove('hidden');
        return;
      }
      
      // 记录用户答案
      userAnswers[`q${questionNumber}`] = selectedOption.value;
      questionSubmitted[questionNumber] = true;
      
      // 显示提示和反馈
      hintElement.classList.remove('hidden');
      
      // 禁用选项和提交按钮
      document.querySelectorAll(`#question${questionNumber} input[type="radio"]`).forEach(input => {
        input.disabled = true;
      });
      submitButton.disabled = true;
      submitButton.style.display = 'none'; // 隐藏提交按钮
      
      // 显示反馈
      if (selectedOption.value === answers[`q${questionNumber}`]) {
        feedbackElement.innerHTML = '<p class="correct">Correct!</p>';
      } else {
        feedbackElement.innerHTML = `<p class="incorrect">Incorrect. The correct answer is ${answers[`q${questionNumber}`]}.</p>`;
      }
      feedbackElement.classList.remove('hidden');
      
      // 显示圣经文本并高亮相关经文
      toggleBibleText(true);
      highlightVerses(verseRange);
      
      // 如果不是最后一个问题，添加下一题按钮
      if (questionNumber < quizQuestions.length) {
        nextButton.textContent = 'Next Question';
        nextButton.setAttribute('data-next', questionNumber + 1);
        nextButton.addEventListener('click', function() {
          showQuestion(parseInt(this.getAttribute('data-next')) - 1);
        });
        submitButton.parentNode.appendChild(nextButton);
      } else {
        // 如果是最后一个问题，添加查看结果按钮
        nextButton.textContent = 'View Results';
        nextButton.addEventListener('click', showResults);
        submitButton.parentNode.appendChild(nextButton);
      }
    }

    // 显示测验结果
    function showResults() {
      const answers = {
        q1: 'B',
        q2: 'B',
        q3: 'B'
      };
      
      let score = 0;
      let feedback = '';
      
      // 检查答案
      for (const question in answers) {
        if (userAnswers[question] === answers[question]) {
          score++;
          feedback += `<p class="correct">Question ${question.substring(1)}: Correct!</p>`;
        } else {
          feedback += `<p class="incorrect">Question ${question.substring(1)}: Incorrect. The correct answer is ${answers[question]}.</p>`;
        }
      }
      
      // 显示结果
      quizScore.textContent = `You scored ${score} out of 3`;
      quizFeedback.innerHTML = feedback;
      
      // 隐藏问题，显示结果
      quizQuestions.forEach(question => {
        question.classList.add('hidden');
      });
      quizResults.classList.remove('hidden');
    }

    // 重置测验
    retryQuizBtn.addEventListener('click', function() {
      quizForm.reset();
      quizResults.classList.add('hidden');
      userAnswers = {};
      questionSubmitted = {};
      
      // 重置所有问题状态
      document.querySelectorAll('.quiz-hint').forEach(element => {
        element.classList.add('hidden');
      });
      
      document.querySelectorAll('.quiz-feedback').forEach(element => {
        element.classList.add('hidden');
        element.innerHTML = ''; // 清空反馈内容
      });
      
      document.querySelectorAll('.quiz-question input[type="radio"]').forEach(input => {
        input.disabled = false;
      });
      
      document.querySelectorAll('.submit-question-btn').forEach(button => {
        button.disabled = false;
        button.style.display = '';
      });
      
      document.querySelectorAll('.next-question-btn').forEach(button => {
        button.remove();
      });
      
      // 显示第一个问题
      showQuestion(0);
      toggleBibleText(false);
    });

    // 完成课程
    completeLessonBtn.addEventListener('click', function() {
      document.getElementById('quiz').classList.add('hidden');
      document.getElementById('completion').classList.remove('hidden');
      progressBar.style.width = '100%';
      progressText.textContent = '100% Complete';
      // 隐藏圣经文本
      toggleBibleText(false);
    });

    // 上一题按钮
    document.querySelectorAll('.prev-question-btn').forEach(button => {
      button.addEventListener('click', function() {
        const prevQuestionIndex = parseInt(this.getAttribute('data-prev')) - 1;
        showQuestion(prevQuestionIndex);
      });
    });

    // 提交答案按钮
    document.querySelectorAll('.submit-question-btn').forEach(button => {
      button.addEventListener('click', function() {
        const questionNumber = parseInt(this.getAttribute('data-question'));
        const verseRange = this.getAttribute('data-verses');
        submitQuestion(questionNumber, verseRange);
      });
    });

    // 初始化测验
    function initQuiz() {
      // 确保只显示第一个问题，其他都隐藏
      quizQuestions.forEach((question, i) => {
        if (i === 0) {
          question.classList.remove('hidden');
        } else {
          question.classList.add('hidden');
        }
      });
      
      // 隐藏所有提示
      document.querySelectorAll('.quiz-hint').forEach(hint => {
        hint.classList.add('hidden');
      });
      
      // 隐藏结果部分
      document.getElementById('quiz-results').classList.add('hidden');
      
      // 隐藏底部导航中的 Previous 按钮
      document.querySelector('#quiz .lesson-navigation-buttons .prev-section-btn').style.display = 'none';
      
      // 隐藏所有问题中的 Previous 按钮
      document.querySelectorAll('.prev-question-btn').forEach(button => {
        button.style.display = 'none';
      });
      
      toggleBibleText(false);
    }

    // 当进入测验部分时初始化
    document.querySelector('[data-next="quiz"]').addEventListener('click', function() {
      setTimeout(initQuiz, 100); // 给DOM更新一点时间
    });
    
    // Bible text font size controls
    const bibleContent = document.querySelector('.bible-content');
    let fontSize = 16; // Default font size
    
    document.getElementById('increase-font').addEventListener('click', function() {
      if (fontSize < 24) {
        fontSize += 2;
        bibleContent.style.fontSize = `${fontSize}px`;
      }
    });
    
    document.getElementById('decrease-font').addEventListener('click', function() {
      if (fontSize > 12) {
        fontSize -= 2;
        bibleContent.style.fontSize = `${fontSize}px`;
      }
    });
  });
</script>
</body>
</html>
